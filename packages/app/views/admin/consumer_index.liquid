{% layout "layouts/base_admin.liquid" %}

{% block content %}
  <h1>consumer</h1>

  <h2>event source mappings</h2>
  <table class="ui selectable table">
    <thead>
      <tr>
        <th>mapping</th>
        <th>etc</th>
      </tr>
    </thead>
    <tbody>
      {% for entry in entries %}
        <tr>
          <td>
            <dl>
              <dt>sqs</dt>
              <dd>{{ entry.display_eventSourceArn }}</dd>
              <dt>lambda</dt>
              <dd>{{ entry.display_functionArn }}</dd>
            </dl>

            <details>
              <summary>details</summary>
<pre>{{ entry | json: 2}}</pre>
            </details>
          </td>
          <td>
            <div class="ui mini buttons">

              <button class="ui primary button">start</button>

              <div class="or"></div>

              <button class="ui secondary button">stop</button>

              <div class="or"></div>

              <form method="post" action="/admin/consumer/consume">
                <input
                  type="hidden"
                  name="uuid"
                  value="{{ entry.uuid }}">
                <button class="ui button" type="submit">consume</button>
              </form>

              <div class="or"></div>

              <button class="ui negative button">flush</button>
            </div>
          </td>
          <td></td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}